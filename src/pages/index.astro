---
import { getCollection } from 'astro:content'
import BaseLayout from '../layouts/BaseLayout.astro'
import Hero from '../components/Hero.astro'
import ProjectCard from '../components/ProjectCard.astro'
import TechStack from '../components/TechStack.astro'
import ContactSection from '../components/ContactSection.astro'
import JumpGame from '../components/JumpGame.astro'

const projects = (await getCollection('projects')).sort(
  (a, b) => a.data.order - b.data.order
)
---

<BaseLayout title="Home">
  <Hero />

  <!-- Projects -->
  <section id="projects" class="mx-auto max-w-5xl px-4 py-section">
    <h2
      class="mb-2 text-heading font-bold text-text-primary"
    >
      Projects
    </h2>
    <p class="mb-8 text-text-secondary">
      Things I've built and shipped.
    </p>
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {
        projects.map((project) => (
          <ProjectCard
            title={project.data.title}
            description={project.data.description}
            liveUrl={project.data.liveUrl}
            githubUrl={project.data.githubUrl}
            techStack={project.data.techStack}
          />
        ))
      }
    </div>
  </section>

  <TechStack />
  <JumpGame />
  <ContactSection />
</BaseLayout>
